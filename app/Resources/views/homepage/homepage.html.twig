{# app/Resources/views/homepage/homepage.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Home{% endblock%}

{% block body %}
            
	 <main class="mdl-layout_content">
		<div class="page-content mdl-grid">
			
			<!-- ONLY SHOW THE CREATE CONFERENCE CARD WHEN LOGGED IN AS ADMIN -->
			<!-- THIS WILL BE STATIC ON TOP OF THE PAGE FOR ADMINS -->
			
				<div class="mdl-card create-conference-card mdl-cell mdl-cell--12-col mdl-shadow--2dp">
				  <div class="mdl-card__title mdl-color--primary mdl-color-text--white">
                    <h2 class="mdl-card__title-text">Create New Conference</h2>
				  </div>
				  <div class="mdl-card__supporting-text">
					You can create a new conference here. Click below to get started.
				  </div>
				  <div class="mdl-card__actions mdl-card--border">
					<a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" href="{{ path('conference') }}">
					  New Conference
					</a>
				  </div>
				</div>

			<!-- SHOW CONFERENCES HERE -->
			
			{% if conferences is empty %}
				<div class="mdl-card empty-conference-card mdl-cell mdl-cell--12-col mdl-shadow--2dp">
				  <div class="no-conference-icon">
						<i class="material-icons mdl-list__item-icon">event_busy</i>
				  </div>
				  <div class="mdl-card__title mdl-color-text--grey">
                    <h2 class="mdl-card__title-text">There are no conferences for you to join right now</h2>
				  </div>
				</div>
			{% endif %}
			
			{% for c in conferences|sort %}
			<div class="mdl-card conference-card-wide mdl-cell mdl-cell--12-col mdl-shadow--2dp">
			  <div class="mdl-card__title">
				<h2 class="mdl-card__title-text">{{ c.name }}</h2>
				<img class="conference-image" src="{{ asset('images/conference/' ~ c.imageName) }}"/>
			  </div>

			  <div class="mdl-card__supporting-text">
				<div class = "description__text">
					{{ c.description }}
				</div>
				<br>
				{{ c.startDatetime | date("m/d/Y")}} - {{ c.endDatetime | date("m/d/Y")}} Â· {{ c.location }}
				
				<button class="conference-expand mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-shadow--4dp">
					<i class="material-icons">expand_more</i>
				</button>
			  </div>
			  
			  {# TODO: Remove "Join Conference" button once you joined conference #}
			  
			  {# TODO: Add "Leave Conference" button after you joined the conference https://www.getmdl.io/components/index.html#buttons-section #}

			  <div class="mdl-card__actions mdl-card--border">
			  	<div class="mdl-card__actions mdl-card--border">
				<a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" href="{{ path('conference_reg', {'conf_id': c.id}) }}">
				  Join Conference
				</a>
				<a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" href="{{ path('conference_show', {'conf_id': c.id}) }}">
				  View Details
				</a>
				<a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" href="{{ path('conference_edit', {'conf_id': c.id}) }}">
				  Edit Conference
				</a>
				<a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" href="{{ path('event', {'conf_id': c.id}) }}">
				  Add Event
				</a>
				<a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-toggle="modal" data-target="#deleteModal">
				  Delete Conference
				</a>
			  </div>
			</div>
			
			<!-- Modal -->
			<div id="deleteModal" class="modal fade" role="dialog">
			  <div class="modal-dialog">

				<!-- Modal content-->
				<div class="modal-content">
				  <div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">Confirm Delete</h4>
				  </div>
				  <div class="modal-body">
					<p>Are you sure you want to delete this conference and its events?</p>
				  </div>
				  <div class="modal-footer">
					<button class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">Cancel</button>
					<a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" href="{{ path('conference_delete', {'conf_id': c.id}) }}">Delete</a>
				  </div>
				</div>
			  </div>
			</div>
			{% endfor %}
		</div>
	 </main>
{% endblock %}
